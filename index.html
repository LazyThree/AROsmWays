<!DOCTYPE html>
<html>
    <head>
        <meta charset='utf-8' />
        <title>AR.js osm example</title>
        <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
        <!-- Assumes AR.js build is in the 'AR.js' directory -->
        <script type='text/javascript' src='ar-threex-location-only.js'></script>
        <script type='text/javascript' src='aframe-ar.js'></script>
        <script type='text/javascript' src='index.js'></script>
        <script type='text/javascript' src='osm.js'></script>
        <script type='text/javascript' src='osmway.js'></script>
        <script type='text/javascript' src='click.js'></script>
        <style type='text/css'>
        #status {
            font-family: Roboto, sans-serif;
            color: white;
            position: absolute;
            top:50%;
            left:calc(50% - 100px);
            font-size: 150%;
            font-weight: bold;
        }

        #mylo{
            position: absolute;
            z-index: 1000;
        }
        </style>

    </head>
    <body style='margin: 0; overflow: hidden'>
        <div id="mylo">
            将数据写入这里，看看数据是否被写入这里了
            </div>
        <div id='setloc' style='position:absolute; left: 10px; bottom: 2%; z-index:999; background-color: blue; color: white; padding: 10px'>
            Lat:<input id="lat" value="51.049" /> 
            Lon: <input id="lon" value="-0.723"/> 
            Min Acc: <input id='minacc' value='1000' /> <input type='button' id='go' value='go' />
        </div>
        <a-scene vr-mode-ui='enabled: false' arjs='sourceType: webcam; videoTexture: true; debugUIEnabled: false'>
            <div id='status'></div>
            <a-camera gps-new-camera='simulateLatitude: 51.049; simulateLongitude: -0.723' position='0 40 0' wasd-controls='acceleration: 1300'></a-camera>
            <a-entity osm></a-entity>
        </a-scene>
        <script>
                const el = document.querySelector("[gps-new-camera]");
                let curlat = 51.040;
                let curlon = -0.710;
                const minacc = 100;
                index = 0;
                function LoadGeo()
                {
                    let status = Android.GetStatus();
                    if(status=="0")
                        return ;
                    
                    let LatDiv = document.getElementById("lat");
                    let LonDiv = document.getElementById("lon");
                    let AltDiv = document.getElementById("minacc");
                    
                    LatDiv.value = Android.GetLat();
                    LonDiv.value = Android.GetLng();
                    AltDiv.value = Android.GetAlt();

                    let elem = document.getElementById("mylo");
                    elem.innerHTML= Android.GetLat()+","+Android.GetLng();
                    
                }

                function AddLat()
                {
                    var mylat = 51.040;
                    var mylon = -0.715;
                    mylat = mylat + 0.00001*index;
                    mylon = mylon + 0.00001*index;
                    el.setAttribute('gps-new-camera', { simulateLatitude: mylat, simulateLongitude: mylon, positionMinAccuracy: minacc } );
                    //el.update();
                    if(index%10==0)
                    {
                        console.log(el.getAttribute('gps-new-camera'));
                        console.log("当前纬度为"+String(curlat));
                        console.log("当前经度为"+String(curlon));
                    }
                    index+=1;
                }

                setInterval(AddLat,100);
                //setInterval(LoadGeo,100);
        </script>
    </body>
</html>
